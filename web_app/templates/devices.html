{% extends "base.html" %}

{% block title %}设备管理 - 自动化运维工具{% endblock %}

{% block content %}
<h2>设备管理</h2>

<div class="actions">
    <button class="btn btn-primary" onclick="showAddDeviceForm()">添加设备</button>
</div>

<table class="device-table">
    <thead>
        <tr>
            <th>设备名称</th>
            <th>IP地址</th>
            <th>操作</th>
        </tr>
    </thead>
    <tbody>
        {% for device in devices %}
        <tr>
            <td>{{ device.name }}</td>
            <td>{{ device.ip }}</td>
            <td>
                <button class="btn btn-sm btn-secondary">编辑</button>
                <button class="btn btn-sm btn-danger">删除</button>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- 添加设备表单 (隐藏) -->
<div id="addDeviceForm" class="modal">
    <div class="modal-content">
        <span class="close" onclick="hideAddDeviceForm()">&times;</span>
        <h3>添加新设备</h3>
        <form id="deviceForm">
            <div class="form-group">
                <label for="deviceName">设备名称:</label>
                <input type="text" id="deviceName" name="deviceName" required>
            </div>
            <div class="form-group">
                <label for="deviceIp">IP地址:</label>
                <input type="text" id="deviceIp" name="deviceIp" required>
            </div>
            <button type="submit" class="btn btn-primary">添加设备</button>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    function showAddDeviceForm() {
        document.getElementById('addDeviceForm').style.display = 'block';
    }
    
    function hideAddDeviceForm() {
        document.getElementById('addDeviceForm').style.display = 'none';
    }
    
    // 点击模态框外部关闭模态框
    window.onclick = function(event) {
        const modal = document.getElementById('addDeviceForm');
        if (event.target == modal) {
            modal.style.display = 'none';
        }
    }
</script>
{% endblock %}